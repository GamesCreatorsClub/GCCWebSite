.. tags: Meetings
.. slug: 58-let-s-get-moving
.. title: Let’s Get Moving
.. date: 03 February 2015 19:47
.. author: <dd class="hits">

	<h2>
					<a href="https://web.archive.org/web/20170329215412/http://raspberrypilot.com/index.php/meetings/58-let-s-get-moving">
			Let’s Get Moving</a>
			</h2>





		Hits: 598		</dd>
<p><img style="float: left; margin: 6px; display: inline" src="../../../images/old/Space-Rocket-Emoji.html" align="left" height="182" width="182">In
 this last session before half-term we’re going to add movement to the 
player ship. We want this to have a physical feel to it so, unlike in 
previous games, we’re going to use a simple thrust and drag model to 
adjust the ship’s velocity instead of moving it directly. This should 
give us the feeling that the ship is a physical object and it will 
accelerate and decelerate rather than just instantly move – it should 
also mean you can slide and ‘skid’ a bit, which will make the asteroid 
avoidance a little more challenging <img class="wlEmoticon wlEmoticon-winkingsmile" style="border-top-style: none; border-bottom-style: none; border-right-style: none; border-left-style: none" alt="Winking smile" src="../../../images/old/wlemoticon-winkingsmile_2_4602b8cbb3ca2b8d03f8118d29b7b2c0.html"></p>  <p>You
 will probably already realise that this is in no way how a spaceship 
would really behave in space (although with a couple of tweaks to our 
code we could make it so) but instead this is a conscious bending of 
reality to create interesting gameplay. Nearly all the games that you 
know will ‘muck’ with reality to produce good gameplay – otherwise you 
are into the world of simulators instead.</p>  <h3></h3>  <h3>New Globals &amp; Update Code</h3>  <p>At the top of your code, we need to add the globally accessible variables to hold the new ship data:</p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#0000ff"><font style="font-size: 10pt">global</font></font></span></b><font style="font-size: 10pt"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> ship_velocity</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">,</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> ship_thrust</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">,</font></span></b></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#000000"> ship_drag</font></span></font><span style="font-family: ; mso-fareast-font-family: &quot;Times New Roman&quot;"></span></p>  <p class="MsoNormal" style="margin: 0cm 0cm 10pt; line-height: 13pt"><font face="Calibri"><font style="font-size: 11pt" color="#000000">&nbsp;</font></font></p>  <p class="MsoNormal" style="margin: 0cm 0cm 10pt; line-height: 13pt">And
 we’ll need to give these a starting value in the GameReset() function. 
To modify global variables from within a function you will need to add 
them to the list of global variables declared at the beginning of the 
function – this lets python know that you intend to modify the shared 
global variables with these names, not create local independent copies 
(which is the default):</p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#0000ff"><font style="font-size: 10pt">def</font></font></span></b><font style="font-size: 10pt"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff00ff">GameReset</font></span></font><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#000080">():</font></span></b></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></font></span></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#0000ff">global</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> ship_position</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">,</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> ship_rotation</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">,</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> ship_thrust</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">,</font></span></b></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#000000"> \</font></span></font></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font face="Courier New"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; ship_drag, </font></span><font style="font-size: 10pt">ship_velocity</font></font></font></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font face="Courier New"><font style="font-size: 10pt" color="#000000">&nbsp;</font></font></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt">ship_thrust </font></font></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">=</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#ff0000">0</font></span></font></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt">ship_drag </font></font></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">=</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#ff0000">0.95</font></span></font></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt">ship_velocity </font></font></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">=</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">0</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">,</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">0</font></span></font><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#000080">]</font></span></b></font><span style="font-family: ; mso-fareast-font-family: &quot;Times New Roman&quot;"></span></p>  <p>Now
 all of the rest of our changes will occur in the UpdateGameScreen() 
function. Once we set the new ship position here, the rest of the game, 
including the ship drawing, can be left entirely as it already is. This 
is one of the key benefits of organising our game code into relatively 
self-contained functions. So in UpdateGameScreen we can read the up 
arrow key state immediately after our existing key reading code to 
modify the new thrust variable – up and down:</p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font face="Courier New"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt"># If the up-arrow key is held down, increment the thrust</font></font></font></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font face="Courier New"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt"># If it is released, set the thrust back to zero</font></font></font></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></font></span></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#0000ff">if</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> current_keys</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000">pygame</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">.</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000">K_UP</font></span></font><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#000080">]:</font></span></b></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt">ship_thrust </font></font></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">-=</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#ff0000">0.05</font></span></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></font></span></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#0000ff">else</font></span></b></font><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#000080">:</font></span></b></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt">ship_thrust </font></font></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">=</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#ff0000">0</font></span></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"></span></p>  <p>So
 far, so good but the next bit is a bit trickier and will require some 
explanation during the session. The movement our ship needs to make is 
determined by an angle (the ship’s rotation) and a distance (set by the 
thrust value). But how do we turn this into the X and Y coordinate 
change that we know we need to position the ship in its new location? 
The answer is that we need a bit of trigonometry. The <font face="Courier New">sin</font> of the angle (which must be converted from degrees to radians) will give us the X component of our movement, and the <font face="Courier New">cos</font>
 of the angle will give us the Y component.&nbsp; If you have not done 
this yet in maths, then don’t worry I will explain at the session but 
just go ahead and add this code for now:</p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font face="Courier New"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt"># Calculate the change in velocity - stored in the form [X,Y]</font></font></font></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font face="Courier New"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt"># For the X direction:</font></font></font></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt">ship_velocity</font></font></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">0</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">]</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">+=</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> ship_thrust </font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">*</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> math</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">.</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000">sin</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">(</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000">math</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">.</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000">radians</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">(</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000">ship_rotation</font></span></font><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#000080">))</font></span></b></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></font></span></span><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#008000"># And the Y direction:</font></span></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt">ship_velocity</font></font></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">1</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">]</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">+=</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> ship_thrust </font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">*</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> math</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">.</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000">cos</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">(</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000">math</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">.</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000">radians</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">(</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000">ship_rotation</font></span></font><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#000080">))</font></span></b></font></p>  <p>Now
 we need to apply a multiplier to represent drag (even though we know 
that there would not be any in the vacuum of space!). This factor 
reduces the velocity proportionately each frame. Using a proportionate 
reduction is a useful technique because it slows the ship more at high 
speed and as the speed gets down towards zero it slows it less and less –
 this ‘feels’ like drag, which behaves similarly in the real world. When
 the velocity reduces to near zero, then the multiplier has virtually no
 effect and we don’t have to worry about preventing the velocity turning
 negative – which we would if we simply subtracted a fixed velocity each
 frame.</p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font face="Courier New"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt"># Reduce the total velocities proportionally by a drag factor</font></font></font></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt">ship_velocity</font></font></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">0</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">]</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">*=</font></span></b></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#000000"> ship_drag</font></span></font></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt">ship_velocity</font></font></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">1</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">]</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">*=</font></span></b></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#000000"> ship_drag</font></span></font><span style="font-family: ; mso-fareast-font-family: &quot;Times New Roman&quot;"></span></p>  <p>Finally we can update the ship’s position using our calculated velocity:</p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font face="Courier New"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt"># Update the ship's position using the [X,Y] velocities</font></font></font></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt">ship_position</font></font></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">0</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">]</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">+=</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> ship_velocity</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">0</font></span></font><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#000080">]</font></span></b></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt">ship_position</font></font></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">1</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">]</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">+=</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> ship_velocity</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">1</font></span></font><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#000080">]</font></span></b></font><span style="font-family: ; mso-fareast-font-family: &quot;Times New Roman&quot;"></span></p>  <p>You should be able to F5 and try out the new thrust at this point, but don’t fly off the edge of the screen!</p>  <h3></h3>  <h3>Wrap Around</h3>  <p>To
 sort out the ‘flying off into the abyss’ problem we need to add some 
wrap around code. You’ve probably seen this sort of thing in one of our 
previous games, but essentially we need to check the position of the 
ship each loop and ‘fix’ it if it has moved outside of our screen 
bounds. In Pong we simply prevented movement beyond the screen bounds, 
but here we are going to use a technique called ‘wrap around’. When we 
detect the ship has moved off one edge of the screen we’ll automatically
 move the ship back to the opposite side. The code looks like this:</p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font face="Courier New"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt"># Wrap around the ship position if necessary</font></font></font></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></font></span></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#0000ff">if</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> ship_position</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">0</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">]</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">&lt;</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">0</font></span></font><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#000080">:</font></span></b></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt">ship_position</font></font></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">0</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">]</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">=</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> screen_size</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">0</font></span></font><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#000080">]</font></span></b></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></font></span></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#0000ff">if</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> ship_position</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">0</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">]</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">&gt;</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> screen_size</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">0</font></span></font><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#000080">]:</font></span></b></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt">ship_position</font></font></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">0</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">]</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">=</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#ff0000">0</font></span></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></font></span></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#0000ff">if</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> ship_position</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">1</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">]</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">&lt;</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">0</font></span></font><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#000080">:</font></span></b></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt">ship_position</font></font></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">1</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">]</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">=</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> screen_size</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">1</font></span></font><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#000080">]</font></span></b></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><span style="mso-spacerun: yes"><font color="#000000"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp; </font></font></span></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#0000ff">if</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> ship_position</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">1</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">]</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">&gt;</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> screen_size</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">1</font></span></font><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#000080">]:</font></span></b></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"></span></p>  <p class="MsoNormal" style="background: white; margin: 0cm 0cm 0pt; line-height: normal"><font face="Courier New"><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"><span style="mso-spacerun: yes"><font style="font-size: 10pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </font></span><font style="font-size: 10pt">ship_position</font></font></span><font style="font-size: 10pt"><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">[</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#ff0000">1</font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">]</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span><b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000080">=</font></span></b><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font color="#000000"> </font></span></font><span style="font-family: ; color: ; mso-fareast-font-family: &quot;Times New Roman&quot;"><font style="font-size: 10pt" color="#ff0000">0</font></span></font><span style="font-family: ; mso-fareast-font-family: &quot;Times New Roman&quot;"></span></p>  <p>Give
 it a go now and see what you think of our ‘physical’ movement model. 
Try changing the drag value from 0.95 to 0.99 or 0.9 and see how that 
affects the movement. Can you work out what 3D surface we are simulating
 with this sort of wrap around – clue: it’s not a sphere…</p>  <p><img src="../../../images/old/patriotic-donut.html" height="144" width="200"></p>



