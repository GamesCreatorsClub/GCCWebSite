.. tags: Tutorials
.. slug: 83-angry-circles
.. title: Angry Circles
.. date: 06 July 2016 11:24
.. author: Edward Powell

	<h2>
					<a href="https://web.archive.org/web/20161026121708/http://raspberrypilot.com/index.php/tutorials/83-angry-circles">
			Angry Circles</a>
			</h2>





<p><a href="https://web.archive.org/web/20161026121708/http://www.raspberrypilot.com/images/image_2_533f19f87da90399dd8c824637542572.png"><img src="../../../images/old/image_thumb_324e59cbc7335386a027de64df629807.png" alt="image" title="image" style="background-image: none; float: left; padding-top: 0px; padding-left: 0px; margin: 6px; display: inline; padding-right: 0px; border-width: 0px;" border="0" align="left" height="154" width="244"></a>For
 the next couple of weeks I though we might explore the rudiments of 
physics simulators and I was inspired by the excellent tutorials from <a href="https://web.archive.org/web/20161026121708/http://www.petercollingridge.co.uk/book/export/html/6">Peter Collingridge</a>
 on the topic. We have covered all the basic python tools we need 
already, so I think we can leap in with a fairly functional demo which 
will allow you to fling some 2D circular shapes (we’re calling them 
particles) around using the mouse. The particle implementation is also 
an excellent use of the concept of Classes we discussed a few weeks ago.
 In the code below you can see how we group together all the data and 
behaviour (the functions or methods) of a particle in one piece of code 
that defines a Particle class and then create lots of ‘instances’ of 
particles – each has the same structure (making all the management code 
much easier) but they all maintain own specific data values - positions,
 speeds and directions etc. This is perhaps the simplest (but still very
 powerful) benefit of using classes – we will come onto other benefits 
in due course.</p>
<p>Take a look at the code below. At the bottom you should by now 
recognise the absolutely standard game loop – with the usual 
input-&gt;update-&gt;draw cycle. I hope you will see it is surprisingly 
short and very readable! This is a good indication of the well 
structured code above. In the middle of the code, after we define a 
couple of helper functions, is the definition of the class (make sure 
you get your indenting right here – the class’ functions must be 
indented <strong>inside</strong> the class level. The interesting 
aspects of the maths I will cover in tonight’s session – but it all 
comes down to some very simple <em>sin,</em> <em>cos, tan</em> usage and good ol’ Pythagoras.</p>
<p><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="color: #000080;"><strong><span style="font-size: 9pt;">import </span></strong></span><span style="font-size: 9pt;">pygame</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="color: #000080;"><strong><span style="font-size: 9pt;">import </span></strong></span><span style="font-size: 9pt;">random</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="color: #000080;"><strong><span style="font-size: 9pt;">import </span></strong></span><span style="font-size: 9pt;">math</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">background_colour = (<span style="color: #0000ff;">255</span>,<span style="color: #0000ff;">255</span>,<span style="color: #0000ff;">255</span>)</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">(width, height) = (<span style="color: #0000ff;">400</span>, <span style="color: #0000ff;">400</span>)</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">drag = </span><span style="color: #0000ff;"><span style="font-size: 9pt;">0.999</span></span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">elasticity = </span><span style="color: #0000ff;"><span style="font-size: 9pt;">0.75</span></span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">gravity = (math.pi, <span style="color: #0000ff;">0.2</span>)</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="color: #000080;"><strong><span style="font-size: 9pt;">def </span></strong></span><span style="font-size: 9pt;">addVectors(vector1, vector2):</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">angle1 = vector1[</span></span></span><span style="font-size: 9pt;"><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;">0</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">]</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">length1 = vector1[</span></span></span><span style="font-size: 9pt;"><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;">1</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">]</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">angle2 = vector2[</span></span></span><span style="font-size: 9pt;"><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;">0</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">]</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">length2 = vector2[</span></span></span><span style="font-size: 9pt;"><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;">1</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">]</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">x = math.sin(angle1) * length1 + math.sin(angle2) * length2</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">y = math.cos(angle1) * length1 + math.cos(angle2) * length2</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">angle = </span></span></span><span style="font-size: 9pt;"><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;">0.5 </span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">* math.pi - math.atan2(y, x)</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">length = math.hypot(x, y)</span></span></span></span><span style="color: #000000;"><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong><span style="font-size: 9pt;">return </span></strong></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">(angle, length)</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="color: #000080;"><strong><span style="font-size: 9pt;">def </span></strong></span><span style="font-size: 9pt;">findParticle(particles, x, y):</span></span></span></span><span style="color: #000000;"><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong><span style="font-size: 9pt;">for </span></strong></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">p </span></span><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong>in </strong></span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">particles:</span></span></span></span><span style="color: #000000;"><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong><span style="font-size: 9pt;">if </span></strong></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">math.hypot(p.x-x, p.y-y) &lt;= p.size:</span></span></span></span><span style="color: #000000;"><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong><span style="font-size: 9pt;">return </span></strong></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">p</span></span></span></span><span style="color: #000000;"><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong><span style="font-size: 9pt;">return None</span></strong></span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="color: #000080;"><strong><span style="font-size: 9pt;">class </span></strong></span><span style="font-size: 9pt;">Particle():</span></span></span></span><span style="color: #000000;"><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong><span style="font-size: 9pt;">def </span></strong></span></span></span><span style="font-size: 9pt;"><span style="color: #b200b2;"><span style="face: &quot;Courier;"><span style="size: 2;">__init__</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">(</span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">, x_y, size):</span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">.x = x_y[</span></span><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;">0</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">]</span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">.y = x_y[</span></span><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;">1</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">]</span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.size = size</span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">.colour = (</span></span><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;">0</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">, </span></span><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;">0</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">, </span></span><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;">255</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">)</span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">.thickness = </span></span></span><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">1</span></span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">.speed = </span></span></span><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">0</span></span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">.angle = </span></span></span><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">0</span></span></span></span></span><span style="color: #000000;"><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong><span style="font-size: 9pt;">def </span></strong></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">display(</span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">):</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">pygame.draw.circle(screen, </span></span></span><span style="font-size: 9pt;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">.colour, (</span></span><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;">int</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">(</span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">.x), </span></span><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;">int</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">(</span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">.y)), </span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">.size, </span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.thickness)</span></span></span></span><span style="color: #000000;"><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong><span style="font-size: 9pt;">def </span></strong></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">move(</span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">):</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">(</span></span></span><span style="font-size: 9pt;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">.angle, </span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">.speed) = addVectors((</span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">.angle, </span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.speed), gravity)</span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">.x += math.sin(</span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">.angle) * </span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.speed</span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">.y -= math.cos(</span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">.angle) * </span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.speed</span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.speed *= drag</span></span></span></span><span style="color: #000000;"><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong><span style="font-size: 9pt;">def </span></strong></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">bounce(</span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">):</span></span></span></span><span style="color: #000000;"><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong><span style="font-size: 9pt;">if </span></strong></span></span></span><span style="font-size: 9pt;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">.x &gt; width - </span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.size:</span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">.x = </span></span><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;">2</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">*(width - </span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">.size) - </span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.x</span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">.angle = - </span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.angle</span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.speed *= elasticity</span></span></span></span><span style="color: #000000;"><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong><span style="font-size: 9pt;">elif </span></strong></span></span></span><span style="font-size: 9pt;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">.x &lt; </span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.size:</span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">.x = </span></span><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;">2</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">*</span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">.size - </span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.x</span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">.angle = - </span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.angle</span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.speed *= elasticity</span></span></span></span><span style="color: #000000;"><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong><span style="font-size: 9pt;">if </span></strong></span></span></span><span style="font-size: 9pt;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">.y &gt; height - </span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.size:</span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">.y = </span></span><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;">2</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">*(height - </span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">.size) - </span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.y</span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">.angle = math.pi - </span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.angle</span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.speed *= elasticity</span></span></span></span><span style="color: #000000;"><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong><span style="font-size: 9pt;">elif </span></strong></span></span></span><span style="font-size: 9pt;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">.y &lt; </span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.size:</span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">.y = </span></span><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;">2</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">*</span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">.size - </span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.y</span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">.angle = math.pi - </span></span><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.angle</span></span></span></span><span style="color: #000000;"><span style="color: #94558d;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">self</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">.speed *= elasticity</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">screen = pygame.display.set_mode((width, height))</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">pygame.display.set_caption(<span style="color: #008080;"><strong>'Angry Circles'</strong></span>)</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">number_of_particles = </span><span style="color: #0000ff;"><span style="font-size: 9pt;">3</span></span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">my_particles = []</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="color: #000080;"><strong><span style="font-size: 9pt;">for </span></strong></span><span style="font-size: 9pt;">n <span style="color: #000080;"><strong>in </strong></span><span style="color: #000080;">range</span>(number_of_particles):</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">size = random.randint(</span></span></span><span style="font-size: 9pt;"><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;">10</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">, </span></span><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;">20</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">)</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">x = random.randint(size, width-size)</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">y = random.randint(size, height-size)</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">particle = Particle((x, y), size)</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">particle.speed = random.random()</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">particle.angle = random.uniform(</span></span></span><span style="font-size: 9pt;"><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;">0</span></span></span><span style="face: &quot;Courier;"><span style="size: 2;">, math.pi*</span></span><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;">2</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">)</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">my_particles.append(particle)</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">clock = pygame.time.Clock()</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">selected_particle = </span><span style="color: #000080;"><strong><span style="font-size: 9pt;">None</span></strong></span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">running = </span><span style="color: #000080;"><strong><span style="font-size: 9pt;">True</span></strong></span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="color: #000080;"><strong><span style="font-size: 9pt;">while </span></strong></span><span style="font-size: 9pt;">running:</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">clock.tick(</span></span></span><span style="font-size: 9pt;"><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;">20</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">)</span></span></span></span><span style="color: #000000;"><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong><span style="font-size: 9pt;">for </span></strong></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">event </span></span><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong>in </strong></span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">pygame.event.get():</span></span></span></span><span style="color: #000000;"><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong><span style="font-size: 9pt;">if </span></strong></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">event.type == pygame.QUIT:</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">running = </span></span></span><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong><span style="font-size: 9pt;">False</span></strong></span></span></span></span><span style="color: #000000;"><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong><span style="font-size: 9pt;">elif </span></strong></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">event.type == pygame.MOUSEBUTTONDOWN:</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">(mouseX, mouseY) = pygame.mouse.get_pos()</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">selected_particle = findParticle(my_particles, mouseX, mouseY)</span></span></span></span><span style="color: #000000;"><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong><span style="font-size: 9pt;">elif </span></strong></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">event.type == pygame.MOUSEBUTTONUP:</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">selected_particle = </span></span></span><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong><span style="font-size: 9pt;">None</span></strong></span></span></span></span><span style="color: #000000;"><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong><span style="font-size: 9pt;">if </span></strong></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">selected_particle:</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">(mouseX, mouseY) = pygame.mouse.get_pos()</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">dx = mouseX - selected_particle.x</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">dy = mouseY - selected_particle.y</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">selected_particle.angle = </span></span></span><span style="font-size: 9pt;"><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;">0.5</span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">*math.pi + math.atan2(dy, dx)</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">selected_particle.speed = math.hypot(dx, dy) * </span></span></span><span style="color: #0000ff;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">0.1</span></span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">screen.fill(background_colour)</span></span></span></span><span style="color: #000000;"><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong><span style="font-size: 9pt;">for </span></strong></span></span></span><span style="font-size: 9pt;"><span style="face: &quot;Courier;"><span style="size: 2;">particle </span></span><span style="color: #000080;"><span style="face: &quot;Courier;"><span style="size: 2;"><strong>in </strong></span></span></span></span><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">my_particles:</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">particle.move()</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">particle.bounce()</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">particle.display()</span></span></span></span><span style="color: #000000;"><span style="face: &quot;Courier;"><span style="size: 2;"><span style="font-size: 9pt;">pygame.display.flip()</span></span></span></span></p>



